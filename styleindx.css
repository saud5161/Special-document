/* =========================
   أسلوب رسمي متجاوب (CSS فقط)
   تغييرات مطلوبة:
   - رفع شريط الأزرار للأعلى قليلًا وجعله ثابتًا.
   - تحديد أقصى عرض للصفحة وعدم تجاوز حجم معيّن.
   - إصلاح تداخل حقول "اسم ضابط الصالة" وما تحته.
   - جعل "بيانات الصادر" بجانب "بيانات الرحلة" على الشاشات الكبيرة.
   ========================= */

:root{
  --brand-700:#0a4a3c;
  --brand-600:#0e5c4b;
  --brand-500:#11745f;
  --brand-50:#e9f3f0;

  --gold-500:#c3a76d;
  --ink:#101418;
  --muted:#6b7280;
  --card:#ffffff;
  --bg:#f5f6f7;
  --bd:#e5e7eb;
  --danger:#c0392b;

  --radius:14px;
  --radius-sm:10px;
  --shadow:0 8px 22px rgba(0,0,0,.06);
  --shadow-sm:0 3px 10px rgba(0,0,0,.05);

  /* قيود الحجم العامة */
  --page-max: 1200px;   /* أقصى عرض */
  --page-pad: clamp(10px, 2vw, 18px);
}

/* الأساس */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Tajawal", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
  color:var(--ink);
  background:var(--bg);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* الشريط العلوي (إن وُجد) */
.app-topbar{
  position: sticky;
  top: 0;
  inset-inline: 0;
  z-index: 2000; /* أعلى لضمان النقر */
  background: linear-gradient(90deg, var(--brand-700), var(--brand-600));
  color: #fff;
  display: flex;                 /* بدلاً من grid */
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px var(--page-pad);
  box-shadow: var(--shadow);
  max-width: 100vw;
}
.app-topbar__section{
  display: flex;
  align-items: center;
  gap: .5rem;
  min-width: 0;       /* يمنع الانضغاط الغريب */
  flex: 1 1 0;        /* توزيع متساوٍ */
}
.app-topbar__section--right{ justify-content: flex-start; }
.app-topbar__section--center{
  justify-content: center;
  text-align: center;
}
.app-topbar__section--left{ justify-content: flex-end; }
/* الحاويات العامة */
.page-wrap{
  min-height:100%;
  /* مسافة سفلية كبيرة لأن الشريط ثابت ومرفوع للأعلى */
  padding-bottom: 140px;
}
.shell{
  width:100%;
  max-width: var(--page-max);
  margin: clamp(16px, 2.5vw, 28px) auto 24px;
  padding: 0 var(--page-pad);
}

/* شبكة البطاقات العامة */
.cards-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap:16px;
}

/* ترتيب مخصّص ليكون "الصادر" بجانب "الرحلة" على الشاشات الكبيرة */
@media (min-width: 1200px){
  .cards-grid{
    grid-template-columns: repeat(3, 1fr);
    grid-template-areas:
      "receipt receipt receipt"
      "traveler flight issued";
  }
  /* ربط المعرّفات الموجودة بالمناطق */
  #card-receipt{ grid-area: receipt; }
  #card-traveler{ grid-area: traveler; }
  #card-flight{ grid-area: flight; }
  #card-issued{ grid-area: issued; }
  /* إن ظهر كارت الفرد، سيوضع تلقائياً بالسطر التالي */
}

/* البطاقات */
.card{
  background:var(--card);
  border:1px solid var(--bd);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
}
.card__title{
  margin:0;
  padding:12px 14px;
  font-size:1rem;
  font-weight:700;
  color:#1b1f24;
  background:linear-gradient(180deg, #fff 0%, #fff 45%, #fafafa 100%);
  border-bottom:1px solid var(--bd);
}
.card__title i{color:var(--gold-500); margin-inline-start:4px}
.card__body{padding:14px 14px 16px}

/* شبكة الحقول: إصلاح التداخل + محاذاة أنيقة */
.form-grid{
  display:grid;
  grid-template-columns: 170px 1fr; /* Label | Input */
  gap:10px 14px;
  align-items:start;              /* إصلاح محاذاة عمودية */
  grid-auto-flow: row dense;     /* تعبئة ذكية لمنع الفراغات والتداخل */
  min-width: 0;
}
/* الحقول لا تتخطى حدودها */
.form-grid > *{ min-width:0; }
.form-grid .row-span-2{ grid-row: auto !important; } /* إلغاء الامتداد الذي سبب تداخلًا */
#officer-name,
#commander-name{ grid-row: auto !important; }       /* تأكيد خاص لمشكلتك */

/* الملصقات والحقول */
.form-grid > label{
  font-weight:700; color:#24343a; font-size:.92rem;
  background:#fff; border-radius:var(--radius-sm);
  padding:7px 10px; border:1px solid var(--bd);
  display:flex; align-items:center; gap:.5rem;
}
.form-grid > label i{color:var(--brand-600)}
.form-grid input, .form-grid select, .form-grid textarea{
  width:100%;
  height:38px;
  border:1px solid var(--bd);
  border-radius:var(--radius-sm);
  padding:8px 10px;
  font-size:.95rem;
  transition:border-color .15s, box-shadow .15s, background .15s;
  background:#fff;
}
.form-grid input:focus, .form-grid select:focus, .form-grid textarea:focus{
  outline:0;
  border-color:var(--brand-500);
  box-shadow:0 0 0 3px var(--brand-50);
}

/* شارة/تنبيه صغير */
.inline-alert{
  display:flex; align-items:center; gap:.5rem;
  margin:10px 14px -6px; padding:8px 10px;
  background:#fff5e5; color:#7a4a00; border:1px solid #ffe0a6;
  border-radius:var(--radius-sm);
  font-size:.9rem;
}

/* Chips (اختصارات) */
.with-chips{display:grid; gap:8px}
.chips{display:flex; flex-wrap:wrap; gap:8px}
.chip{
  padding:6px 12px; border-radius:999px;
  background:#fff; border:1px solid var(--bd);
  font-weight:600; font-size:.85rem;
  cursor:pointer; transition:.15s;
}
.chip:hover{border-color:var(--brand-500)}
.chip.active{background:var(--brand-50); border-color:var(--brand-500); color:#0b3f35}

/* تمييز الحقول الفارغة (يدار عبر JS) */
.empty-field{
  background:#fcfcf9;
  border-color:#e7c7c7!important;
  box-shadow:0 0 0 2px #fde2e2 inset;
}

/* =========================
   شريط الأزرار (مرفوع وثابت)
   ========================= */
.action-bar{
  position: fixed;          /* بدلاً من sticky */
  left: 0; right: 0;
  bottom: 18px;             /* مرفوع عن الحافة */
  z-index: 1100;
  pointer-events: none;     /* حتى لا يمنع التمرير خارج المنطقة الداخلية */
}
.action-bar__inner{
  pointer-events: auto;     /* التفاعل داخل الشريط */
  max-width: var(--page-max);
  margin: 0 auto;
  padding: 10px var(--page-pad);
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;

  background: rgba(255,255,255,.92);
  backdrop-filter: saturate(140%) blur(10px);
  border:1px solid var(--bd);
  border-radius: 14px;
  box-shadow: var(--shadow);
}
.helper-link{
  text-align:center;
  font-size:.9rem;
  color:var(--muted);
  padding:6px 12px 0;
}

/* أزرار عامة */
.btn{
  appearance:none;
  border:none;
  border-radius:12px;
  padding:10px 16px;
  font-size:.97rem;
  font-weight:700;
  cursor:pointer;
  display:inline-flex;
  gap:.6rem; align-items:center; justify-content:center;
  min-width:160px;
  transition:transform .05s ease, box-shadow .15s ease, background .2s ease;
  box-shadow:var(--shadow-sm);
}
.btn:active{transform:translateY(1px)}
.btn i{font-size:.95rem}
.btn--primary{background:var(--brand-600); color:#fff}
.btn--primary:hover{background:var(--brand-700)}
.btn--secondary{background:#eceff1; color:#22303a}
.btn--secondary:hover{background:#e4e8eb}
.btn--danger{background:#fef2f2; color:#9a1b12; border:1px solid #fbd5d5}
.btn--danger:hover{background:#fde8e8}

.status-pill{
  margin-inline-start:auto;
  background:#ecfdf5; color:#065f46;
  border:1px solid #a7f3d0;
  border-radius:999px;
  padding:6px 10px; font-weight:700; font-size:.9rem;
}

/* أحجام صغيرة */
@media (max-width: 720px){
  .form-grid{grid-template-columns: 1fr}
  .page-wrap{padding-bottom: 160px;} /* زيادة هامش أسفل لسلامة العرض مع الشريط الثابت */
}

/* الطباعة */
@media print{
  .app-topbar, .action-bar { display:none !important; }
  body{background:#fff}
  .card{box-shadow:none; border:1px solid #bbb}
}
@media (max-width: 640px){
  .app-topbar{ flex-wrap: wrap; row-gap: 8px; }
  .app-topbar__section--right,
  .app-topbar__section--left{ flex: 1 1 auto; }
  .app-topbar__section--center{
    order: 3;
    width: 100%;
    flex: 0 0 100%;
  }
}
.time-range {
  display: flex;
  gap: 10px;
}
.time-range input {
  flex: 1;
}
